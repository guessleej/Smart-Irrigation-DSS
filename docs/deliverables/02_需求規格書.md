# 需求規格書

**農業部農田水利署 115 年度「健全智慧管理模組及大數據資料庫」採購案**

**農業水資源智慧決策支援系統**

---

| 項目 | 內容 |
|------|------|
| 文件編號 | SIDSS-SRS-001 |
| 版本 | 1.0 |
| 建立日期 | 2026 年 1 月 12 日 |
| 承辦廠商 | 云昱科技股份有限公司 |

---

## 1. 文件說明

### 1.1 文件目的

本需求規格書旨在詳細描述農業水資源智慧決策支援系統（Smart Irrigation Decision Support System, SIDSS）之功能需求、非功能需求、系統介面需求及資料需求，作為系統設計、開發與驗收之依據。

### 1.2 適用範圍

本文件適用於農業部農田水利署 115 年度「健全智慧管理模組及大數據資料庫」採購案中，農業水資源智慧決策支援系統之開發與建置。

### 1.3 名詞定義

| 名詞 | 定義 |
|------|------|
| SIDSS | Smart Irrigation Decision Support System，農業水資源智慧決策支援系統 |
| API | Application Programming Interface，應用程式介面 |
| GIS | Geographic Information System，地理資訊系統 |
| tRPC | TypeScript Remote Procedure Call，型別安全的遠端程序呼叫 |
| ORM | Object-Relational Mapping，物件關聯對映 |

---

## 2. 系統概述

### 2.1 系統背景

台灣農業灌溉用水佔總用水量約 70%，面對氣候變遷導致的極端降雨與乾旱頻率增加，傳統灌溉管理方式已難以有效因應。農業部農田水利署為提升灌溉用水管理效能，規劃建置農業水資源智慧決策支援系統，整合多元水資源與氣象資料，提供視覺化分析與風險評估功能。

### 2.2 系統目標

本系統之主要目標包含：

| 目標編號 | 目標說明 |
|---------|---------|
| OBJ-01 | 整合水利署開放資料平台與農業氣象觀測網 API，建立即時水情與氣象資料整合平台 |
| OBJ-02 | 開發水庫即時監測功能，提供全台 68 座水庫之即時水情資料 |
| OBJ-03 | 建立缺水風險評估模型，預測灌溉缺水風險等級 |
| OBJ-04 | 開發動態配水模擬模組，模擬不同情境下的最佳配水方案 |
| OBJ-05 | 建置決策儀表板，整合即時水情、降雨情勢、水庫豐枯分析於單一介面 |
| OBJ-06 | 開發 3D GIS 視覺化模組，直覺化呈現灌溉系統設施分布 |

### 2.3 使用者類型

| 使用者類型 | 說明 | 權限等級 |
|-----------|------|---------|
| 系統管理員 | 負責系統維護、使用者管理、資料同步設定 | Admin |
| 決策管理者 | 農田水利署主管，負責灌溉決策與資源調配 | User |
| 灌區管理員 | 各灌區工作站人員，負責灌區日常管理 | User |
| 一般使用者 | 查詢水情資料與統計報表 | User |

---

## 3. 功能需求

### 3.1 決策儀表板模組（FR-01）

#### 3.1.1 功能說明

決策儀表板為系統首頁，整合即時水情統計、降雨情勢、水庫豐枯分析等關鍵資訊，提供決策者快速掌握整體水資源狀況。

#### 3.1.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-01-01 | 系統應顯示監測中水庫總數、平均蓄水率、警戒水庫數量 | 必要 |
| FR-01-02 | 系統應顯示即時降雨量統計（日累積、時雨量） | 必要 |
| FR-01-03 | 系統應顯示灌區總數、灌溉面積統計 | 必要 |
| FR-01-04 | 系統應提供水庫蓄水率趨勢圖表（近 7 日） | 必要 |
| FR-01-05 | 系統應提供降雨量趨勢圖表（近 7 日） | 必要 |
| FR-01-06 | 系統應顯示最新風險評估結果摘要 | 選項 |
| FR-01-07 | 系統應提供資料更新時間戳記 | 必要 |

### 3.2 水庫即時監測模組（FR-02）

#### 3.2.1 功能說明

水庫即時監測模組串接水利署開放資料平台 API，提供全台水庫即時水情資料查詢與視覺化呈現。

#### 3.2.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-02-01 | 系統應串接水利署開放資料平台，取得即時水庫水情資料 | 必要 |
| FR-02-02 | 系統應顯示水庫名稱、蓄水量、蓄水率、有效容量 | 必要 |
| FR-02-03 | 系統應顯示水庫進水量、出水量、水位高度 | 必要 |
| FR-02-04 | 系統應提供水庫蓄水率警戒狀態標示（正常/警戒/嚴重警戒） | 必要 |
| FR-02-05 | 系統應支援水庫名稱搜尋與篩選功能 | 必要 |
| FR-02-06 | 系統應支援依蓄水率排序功能 | 選項 |
| FR-02-07 | 系統應串接翡翠水庫專線 API，取得翡翠水庫即時資料 | 必要 |
| FR-02-08 | 系統應支援即時 API 資料與資料庫資料切換顯示 | 選項 |

#### 3.2.3 外部 API 整合

| API 來源 | API 說明 | 資料更新頻率 |
|---------|---------|-------------|
| opendata.wra.gov.tw | 水庫每日營運狀況 | 每日 |
| opendata.wra.gov.tw | 水庫即時水情資料 | 每小時 |
| w3.feitsui.gov.tw | 翡翠水庫即時水情專線 | 每小時 |
| data5b.wra.gov.tw | 曾文、石門等主要水庫專線 | 即時 |

### 3.3 氣象資料整合模組（FR-03）

#### 3.3.1 功能說明

氣象資料整合模組串接農業氣象觀測網 API，提供降雨情勢分析與預警功能。

#### 3.3.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-03-01 | 系統應串接農業氣象觀測網 API，取得雨量站即時資料 | 必要 |
| FR-03-02 | 系統應顯示各雨量站名稱、位置、即時雨量 | 必要 |
| FR-03-03 | 系統應顯示日累積雨量、時雨量統計 | 必要 |
| FR-03-04 | 系統應提供降雨量等級標示（無雨/小雨/中雨/大雨/豪雨） | 選項 |
| FR-03-05 | 系統應支援雨量站地圖視覺化呈現 | 選項 |

### 3.4 缺水風險評估模組（FR-04）

#### 3.4.1 功能說明

缺水風險評估模組結合水資源供需模擬，評估各灌區之灌溉缺水風險等級，提供決策者預警資訊。

#### 3.4.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-04-01 | 系統應計算各灌區缺水風險指數（0-100） | 必要 |
| FR-04-02 | 系統應依風險指數分類風險等級（低/中/高/極高） | 必要 |
| FR-04-03 | 系統應顯示風險評估因子（水庫蓄水率、降雨量、灌溉需求） | 必要 |
| FR-04-04 | 系統應提供風險評估歷史紀錄查詢 | 選項 |
| FR-04-05 | 系統應支援手動觸發風險評估計算 | 必要 |
| FR-04-06 | 系統應顯示風險評估建議措施 | 選項 |

#### 3.4.3 風險評估模型

風險指數計算公式：

```
風險指數 = (1 - 水庫蓄水率) × 40 + (1 - 降雨充足度) × 30 + 灌溉需求指數 × 30
```

| 風險等級 | 風險指數範圍 | 說明 |
|---------|-------------|------|
| 低風險 | 0 - 25 | 水資源充足，無需特別措施 |
| 中風險 | 26 - 50 | 水資源略顯不足，建議關注 |
| 高風險 | 51 - 75 | 水資源不足，建議採取節水措施 |
| 極高風險 | 76 - 100 | 水資源嚴重不足，需緊急應變 |

### 3.5 動態配水模擬模組（FR-05）

#### 3.5.1 功能說明

動態配水模擬模組以桃園湖口工作站為例，模擬不同情境下的配水方案，協助決策者規劃最佳水資源配置。

#### 3.5.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-05-01 | 系統應提供配水模擬參數設定介面 | 必要 |
| FR-05-02 | 系統應支援設定模擬情境（正常/乾旱/豪雨） | 必要 |
| FR-05-03 | 系統應支援設定可用水量、灌溉面積、作物類型 | 必要 |
| FR-05-04 | 系統應計算各灌區建議配水量 | 必要 |
| FR-05-05 | 系統應顯示配水效率指標 | 選項 |
| FR-05-06 | 系統應提供模擬結果匯出功能 | 選項 |

### 3.6 3D GIS 視覺化模組（FR-06）

#### 3.6.1 功能說明

3D GIS 視覺化模組整合 Google Maps API，提供灌溉系統設施與管理資訊之地圖互動展示。

#### 3.6.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-06-01 | 系統應整合 Google Maps API 提供地圖底圖 | 必要 |
| FR-06-02 | 系統應於地圖上標示水庫位置與狀態 | 必要 |
| FR-06-03 | 系統應於地圖上標示灌區範圍 | 必要 |
| FR-06-04 | 系統應於地圖上標示灌溉設施位置 | 選項 |
| FR-06-05 | 系統應支援地圖縮放與平移操作 | 必要 |
| FR-06-06 | 系統應支援點擊標記顯示詳細資訊 | 必要 |

### 3.7 灌區管理模組（FR-07）

#### 3.7.1 功能說明

灌區管理模組提供灌區基本資料、設施清單與作物資訊之管理功能。

#### 3.7.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-07-01 | 系統應提供灌區清單查詢功能 | 必要 |
| FR-07-02 | 系統應顯示灌區名稱、面積、主要作物、設施數量 | 必要 |
| FR-07-03 | 系統應支援灌區資料新增、修改、刪除（限管理員） | 必要 |
| FR-07-04 | 系統應提供灌區設施清單查詢 | 選項 |
| FR-07-05 | 系統應支援灌區搜尋與篩選功能 | 選項 |

### 3.8 使用者認證與權限管理模組（FR-08）

#### 3.8.1 功能說明

使用者認證與權限管理模組提供使用者登入、登出及角色權限控管功能。

#### 3.8.2 功能需求項目

| 需求編號 | 需求說明 | 優先等級 |
|---------|---------|---------|
| FR-08-01 | 系統應支援 OAuth 2.0 認證機制 | 必要 |
| FR-08-02 | 系統應區分 Admin 與 User 兩種角色 | 必要 |
| FR-08-03 | 系統應限制 Admin 專屬功能（資料管理、系統設定） | 必要 |
| FR-08-04 | 系統應記錄使用者登入時間與操作紀錄 | 選項 |
| FR-08-05 | 系統應支援使用者登出功能 | 必要 |

---

## 4. 非功能需求

### 4.1 效能需求（NFR-01）

| 需求編號 | 需求說明 | 目標值 |
|---------|---------|--------|
| NFR-01-01 | API 回應時間 | ≤ 500ms（95th percentile） |
| NFR-01-02 | 頁面載入時間 | ≤ 3 秒 |
| NFR-01-03 | 同時上線使用者數 | ≥ 100 人 |
| NFR-01-04 | 資料庫查詢效能 | ≤ 200ms |

### 4.2 可用性需求（NFR-02）

| 需求編號 | 需求說明 | 目標值 |
|---------|---------|--------|
| NFR-02-01 | 系統可用性 | ≥ 99.5% |
| NFR-02-02 | 計畫性停機時間 | ≤ 4 小時/月 |
| NFR-02-03 | 非計畫性停機恢復時間 | ≤ 2 小時 |

### 4.3 安全性需求（NFR-03）

| 需求編號 | 需求說明 |
|---------|---------|
| NFR-03-01 | 系統應使用 HTTPS 加密傳輸 |
| NFR-03-02 | 系統應採用 JWT Token 進行身份驗證 |
| NFR-03-03 | 系統應對敏感資料進行加密儲存 |
| NFR-03-04 | 系統應通過弱點掃描檢測 |

### 4.4 相容性需求（NFR-04）

| 需求編號 | 需求說明 |
|---------|---------|
| NFR-04-01 | 系統應支援 Chrome、Firefox、Edge、Safari 等主流瀏覽器 |
| NFR-04-02 | 系統應支援響應式設計，適配桌面與行動裝置 |
| NFR-04-03 | 系統應支援繁體中文介面 |

### 4.5 可維護性需求（NFR-05）

| 需求編號 | 需求說明 |
|---------|---------|
| NFR-05-01 | 系統應採用模組化架構設計 |
| NFR-05-02 | 系統應提供完整的 API 文件 |
| NFR-05-03 | 系統應建立自動化測試機制 |
| NFR-05-04 | 系統應提供錯誤日誌記錄功能 |

---

## 5. 系統介面需求

### 5.1 使用者介面需求

| 需求編號 | 需求說明 |
|---------|---------|
| UI-01 | 系統應採用直覺化的操作介面設計 |
| UI-02 | 系統應提供一致的視覺風格與配色 |
| UI-03 | 系統應提供清楚的操作提示與錯誤訊息 |
| UI-04 | 系統應支援鍵盤操作與無障礙設計 |

### 5.2 外部系統介面需求

| 介面編號 | 外部系統 | 介面類型 | 說明 |
|---------|---------|---------|------|
| EI-01 | 水利署開放資料平台 | REST API | 取得水庫水情資料 |
| EI-02 | 翡翠水庫管理局 | SOAP/REST API | 取得翡翠水庫即時資料 |
| EI-03 | 農業氣象觀測網 | REST API | 取得氣象與雨量資料 |
| EI-04 | Google Maps | JavaScript API | 地圖視覺化服務 |

---

## 6. 資料需求

### 6.1 資料實體

| 資料實體 | 說明 | 主要欄位 |
|---------|------|---------|
| 水庫 (Reservoir) | 水庫基本資料與即時水情 | 名稱、蓄水量、蓄水率、水位 |
| 雨量站 (RainfallStation) | 雨量站基本資料與即時雨量 | 名稱、位置、時雨量、日累積 |
| 灌區 (IrrigationDistrict) | 灌區基本資料 | 名稱、面積、主要作物 |
| 設施 (Facility) | 灌溉設施資料 | 名稱、類型、位置、狀態 |
| 風險評估 (RiskAssessment) | 風險評估紀錄 | 灌區、風險指數、評估時間 |
| 配水模擬 (WaterAllocation) | 配水模擬紀錄 | 情境、配水量、效率指標 |
| 使用者 (User) | 系統使用者資料 | 帳號、角色、登入時間 |

### 6.2 資料保留政策

| 資料類型 | 保留期限 |
|---------|---------|
| 即時水情資料 | 1 年 |
| 風險評估紀錄 | 3 年 |
| 配水模擬紀錄 | 3 年 |
| 系統操作日誌 | 1 年 |

---

## 7. 附錄

### 7.1 需求追溯矩陣

| 需求編號 | 對應目標 | 測試案例 |
|---------|---------|---------|
| FR-01-01 | OBJ-05 | TC-01-01 |
| FR-02-01 | OBJ-02 | TC-02-01 |
| FR-03-01 | OBJ-01 | TC-03-01 |
| FR-04-01 | OBJ-03 | TC-04-01 |
| FR-05-01 | OBJ-04 | TC-05-01 |
| FR-06-01 | OBJ-06 | TC-06-01 |

### 7.2 版本歷程

| 版本 | 日期 | 修訂內容 | 修訂者 |
|------|------|---------|--------|
| 1.0 | 2026/01/12 | 初版建立 | JeffLee |

---

**文件結束**
